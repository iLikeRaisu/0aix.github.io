<!DOCTYPE html>
<html>
<head>
	<title>LolKeep</title>
	<link type="text/css" rel="stylesheet" href="css/stylesheet.css" />
</head>
<body>
	<div id="leftbar">
		<div id="search">
			<input type="text" id="searchbox" maxlength="12" />
		</div>
		<div id="container">
			<div id="scroll">
			</div>
		</div>
	</div>
	<main>
		
	</main>
	<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="js/jquery.slimscroll.min.js"></script>
	<script type="text/javascript">
	//Load JSONs
	var champions;
	var championsList = [];
	var keyNameList = [];
	var searchList = [];
	var selected = "";
	
	function sortByKey(array, key) {
		return array.sort(function(a, b) {
			var x = a[key]; var y = b[key];
			return ((x < y) ? -1 : ((x > y) ? 1 : 0));
		});
	}
	
	//SlimScroll
	$("div#scroll").slimScroll({
		railColor: '#ffffff',
		height: '100%',
		railVisible: true,
		alwaysVisible: true
	});
	
	//Champion list
	function PopulateList() {
		searchList = [];
		var delimiter = $("#searchbox").val().toLowerCase();
		if (delimiter != "")
		{
			var lim = championsList.length;
			for (var i = 0; i < lim; i++)
			{
				if(championsList[i].name.toLowerCase().indexOf(delimiter) > -1)
					searchList.push(championsList[i].key);
			}
		}
		else
		{
			var lim = championsList.length;
			for (var i = 0; i < lim; i++)
				searchList.push(championsList[i].key);
		}
			
		lim = searchList.length;
		var inner = "";
		for (var i = 0; i < lim; i++)
		{
			var key = searchList[i];
			inner += '<div class="box" id="' + key + '"><div class="imgsection"><img class="icon" src="champions/' + keyNameList[key] + '.png"></div><div class="txtsection"><h1>' + keyNameList[key] + '</h1></div></div>';
		}
		$("div#scroll").html(inner);
		Select("div#" + selected);
		$("div.box").click(function() {
			selected = $(this).attr("id");
			Select("div#" + selected);
		});
	}
	
	//Selector
	function Select(id) {
		if (id != "div#")
		{
			$("div.box").css("background-color", "#FF0000");
			$(id).css("background-color", "#FFFF00");
		}
	}
	
	//onLoad
	$(document).ready(function() {
		$.getJSON("json/champions.json", function(data) {
			champions = data.data;
			for (var key in champions)
				championsList.push({ "key": key, "name": champions[key].name, "title": champions[key].title });
			championsList = sortByKey(championsList, "name");
			var lim = championsList.length;
			for (var i = 0; i < lim; i++)
				keyNameList[championsList[i].key] = championsList[i].name;
			PopulateList();
		});
		$(".box").click(function() {
			selected = $(this).attr("id");
			Select("div#" + selected);
		});
		$("#searchbox").keyup(function() {
			PopulateList();
		});
	});
	</script>
</body>
</html>